{"version":3,"sources":["loaders.js","scene.js","gui.js","FBOCompositor.js","hud.js","grid.js","main.js","run.js","events.js","util.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["'use strict';\n\nvar LOADING_MANAGER = new THREE.LoadingManager();\nLOADING_MANAGER.onLoad = () => {\n\n\tmain();\n\trun();\n\n};\n\nLOADING_MANAGER.onProgress = ( item, loaded, total ) => {\n\n\tconsole.log( loaded + '/' + total, item );\n\n};\n\nvar SHADERS = {};\nvar SHADER_LOADER = new THREE.XHRLoader( LOADING_MANAGER );\nSHADER_LOADER.setResponseType( 'text' );\nSHADER_LOADER.showStatus = true;\n\nSHADER_LOADER.loadAll = ( SHADERS, urlObj ) => {\n\n\tObject.keys( urlObj ).forEach( ( key ) => {\n\n\t\tSHADER_LOADER.load( urlObj[ key ], ( shader ) => {\n\n\t\t\tSHADERS[ key ] = shader;\n\n\t\t} );\n\n\t} );\n\n};\n\nSHADER_LOADER.loadAll( SHADERS, {\n\n\tgridVert: './shaders/grid.vert',\n\tgridFrag: './shaders/grid.frag',\n\thudVert: './shaders/hud.vert',\n\thudFrag: './shaders/hud.frag',\n\tpassVert: './shaders/pass.vert',\n\tpassFrag: './shaders/pass.frag',\n\tnoiseFrag: './shaders/noise.frag',\n\n} );\n\nvar TEXTURES = {};\nvar TEXTURE_LOADER = new THREE.TextureLoader( LOADING_MANAGER );\nTEXTURE_LOADER.load( './textures/mc_skymetal.jpg', ( tex ) => {\n\tTEXTURES.matcap = tex;\n} );\n","'use strict';\n\nif ( !Detector.webgl ){\n\tDetector.addGetWebGLMessage();\n}\n\nvar CANVAS, STATS;\nvar SCENE, CAMERA, CAMERA_CTRL, RENDERER;\nvar WIDTH = window.innerWidth;\nvar HEIGHT = window.innerHeight;\nvar PIXEL_RATIO = window.devicePixelRatio || 1;\nvar SCREEN_RATIO = WIDTH/HEIGHT;\nvar CLOCK = new THREE.Clock();\n\n// ---- Settings\n\tvar SCENE_SETTINGS = {\n\n\t\tbgColor: 0x24242d,\n\t\tenableGridHelper: false,\n\t\tenableAxisHelper: true\n\n\t};\n\n// ---- Scene\n\tCANVAS = document.getElementById( 'canvas-container' );\n\tSCENE = new THREE.Scene();\n\n// ---- Camera\n\tCAMERA = new THREE.PerspectiveCamera( 75, window.innerWidth/window.innerHeight, 10, 100000 );\n\t// CAMERA orbit control\n\tCAMERA_CTRL = new THREE.OrbitControls( CAMERA, CANVAS );\n\tCAMERA_CTRL.object.position.z = 600;\n\tCAMERA_CTRL.update();\n\n// ---- Renderer\n\tRENDERER = new THREE.WebGLRenderer( { antialias: true , alpha: true } );\n\tRENDERER.setSize( WIDTH, HEIGHT );\n\tRENDERER.setPixelRatio( PIXEL_RATIO );\n\tRENDERER.setClearColor( SCENE_SETTINGS.bgColor, 1 );\n\tRENDERER.autoClear = false;\n\tCANVAS.appendChild( RENDERER.domElement );\n\n// ---- Stats\n\tSTATS = new Stats();\n\tCANVAS.appendChild( STATS.domElement );\n\n// ---- grid & axis helper\n\tvar gridHelper = new THREE.GridHelper( 600, 50 );\n\tgridHelper.setColors( 0x00bbff, 0xffffff );\n\tgridHelper.material.opacity = 0.1;\n\tgridHelper.material.transparent = true;\n\tgridHelper.position.y = -300;\n\tSCENE.add( gridHelper );\n\n\tvar axisHelper = new THREE.AxisHelper( 50 );\n\tSCENE.add( axisHelper );\n\n\tfunction updateHelpers() {\n\t\tgridHelper.visible = !!SCENE_SETTINGS.enableGridHelper;\n\t\taxisHelper.visible = !!SCENE_SETTINGS.enableAxisHelper;\n\t}\n\tupdateHelpers();\n","'use strict';\n\nvar gui, gui_display, gui_settings;\n\nfunction initGui() {\n\n\t// gui_settings.add( Object, property, min, max, step ).name( 'name' );\n\n\tgui = new dat.GUI();\n\tgui.width = 300;\n\n\tgui_display = gui.addFolder( 'Display' );\n\t\tgui_display.autoListen = false;\n\n\tgui_settings = gui.addFolder( 'Settings' );\n\n\t\tgui_settings.addColor( SCENE_SETTINGS, 'bgColor' ).name( 'Background' );\n\t\tgui_settings.add( CAMERA, 'fov', 25, 120, 1 ).name( 'FOV' );\n\n\tgui_display.open();\n\tgui_settings.open();\n\n\tgui_settings.__controllers.forEach( ( controller ) => {\n\t\tcontroller.onChange( updateSettings );\n\t} );\n\n}\n\nfunction updateSettings() {\n\n\tCAMERA.updateProjectionMatrix();\n\tRENDERER.setClearColor( SCENE_SETTINGS.bgColor , 1.0 );\n\n}\n\nfunction updateGuiDisplay() {\n\n\tgui_display.__controllers.forEach( ( controller ) => {\n\t\tcontroller.updateDisplay();\n\t} );\n\n}\n","\nfunction FBOCompositor( renderer, bufferSize, passThruVertexShader ) {\n\n\tthis.renderer = renderer;\n\n\tthis._getWebGLExtensions();\n\tthis.bufferSize = bufferSize;\n\tthis.passThruVertexShader = passThruVertexShader;\n\tvar halfBufferSize = bufferSize * 0.5;\n\tthis.camera = new THREE.OrthographicCamera( -halfBufferSize, halfBufferSize, halfBufferSize, -halfBufferSize, 1, 10 );\n\tthis.camera.position.z = 5;\n\tthis.quad = new THREE.Mesh( new THREE.PlaneBufferGeometry( 2, 2 ), null );\n\tthis.scene = new THREE.Scene();\n\tthis.scene.add( this.quad );\n\tthis.dummyRenderTarget = new THREE.WebGLRenderTarget( 2, 2 );\n\n\tthis.passThruShader = new THREE.ShaderMaterial( {\n\n\t\tuniforms: {\n\t\t\tresolution: {\n\t\t\t\ttype: 'v2',\n\t\t\t\tvalue: new THREE.Vector2( this.bufferSize, this.bufferSize )\n\t\t\t},\n\t\t\tpassTexture: {\n\t\t\t\ttype: 't',\n\t\t\t\tvalue: null\n\t\t\t}\n\t\t},\n\t\tvertexShader: SHADERS.passVert,\n\t\tfragmentShader: SHADERS.passFrag\n\n\t} );\n\n\tthis.passes = [];\n\n}\n\nFBOCompositor.prototype = {\n\n\t_getWebGLExtensions: function () {\n\n\t\tvar gl = this.renderer.getContext();\n\t\tif ( !gl.getExtension( \"OES_texture_float\" ) ) {\n\t\t\tconsole.error( \"No support for float textures!\" );\n\t\t}\n\n\t\tif ( gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS ) === 0 ) {\n\t\t\tconsole.error( \"No support for vertex shader textures!\" );\n\t\t}\n\n\t},\n\n\tgetPass: function ( name ) {\n\t\t/* todo: update to ECMA6 Array.find() */\n\t\tvar pass = null;\n\t\tthis.passes.some( function ( currPass ) {\n\n\t\t\tvar test = currPass.name === name;\n\t\t\tif ( test ) pass = currPass;\n\t\t\treturn test;\n\n\t\t} );\n\n\t\treturn pass;\n\n\t},\n\n\taddPass: function ( name, fragmentSahader, inputTargets ) {\n\n\t\tvar pass = new FBOPass( name, this.passThruVertexShader, fragmentSahader, this.bufferSize );\n\t\tpass.inputTargetList = inputTargets  || {};\n\t\tthis.passes.push( pass );\n\t\treturn pass;\n\n\t},\n\n\tupdatePassDependencies: function () {\n\n\t\tvar self = this;\n\t\tthis.passes.forEach( function ( currPass ) {\n\n\t\t\tObject.keys( currPass.inputTargetList ).forEach( function bindTarget( shaderInputName ) {\n\n\t\t\t\tvar targetPass = currPass.inputTargetList[ shaderInputName ];\n\t\t\t\tcurrPass.setInputTarget( shaderInputName, self.getPass( targetPass ).getRenderTarget() );\n\n\t\t\t} );\n\n\t\t} );\n\n\t},\n\n\t_renderPass: function ( shader, passTarget ) {\n\n\t\tthis.quad.material = shader;\n\t\tthis.renderer.render( this.scene, this.camera, passTarget, true );\n\n\t},\n\n\trenderInitialBuffer: function ( dataTexture, toPass ) {\n\n\t\tvar pass = this.getPass( toPass );\n\t\tthis.passThruShader.uniforms.passTexture.value = dataTexture;\n\t\tthis._renderPass( this.passThruShader, pass.doubleBuffer[ 1 ] ); // render to secondary buffer which is already set as input to first buffer.\n\t\tthis._renderPass( this.passThruShader, pass.doubleBuffer[ 0 ] ); // or just render to both\n\t\t/*!\n\t\t *\tdont call renderer.clear() before updating the simulation it will clear current active buffer which is the render target that we previously rendered to.\n\t\t *\tor just set active target to dummy target.\n\t\t */\n\t\tthis.renderer.setRenderTarget( this.dummyRenderTarget );\n\n\t},\n\n\tstep: function () {\n\n\t\tfor ( var i = 0; i < this.passes.length; i++ ) {\n\n\t\t\tthis.updatePassDependencies();\n\t\t\tvar currPass = this.passes[ i ];\n\t\t\tthis._renderPass( currPass.getShader(), currPass.getRenderTarget() );\n\t\t\tcurrPass.swapBuffer();\n\n\t\t}\n\n\t}\n\n};\n\n\nfunction FBOPass( name, vertexShader, fragmentSahader, bufferSize ) {\n\n\tthis.name = name;\n\tthis.vertexShader = vertexShader;\n\tthis.fragmentSahader = fragmentSahader;\n\tthis.bufferSize = bufferSize;\n\n\tthis.currentBuffer = 0;\n\tthis.doubleBuffer = []; //  single FBO cannot act as input (texture) and output (render target) at the same time, we take the double-buffer approach\n\tthis.doubleBuffer[ 0 ] = this.generateRenderTarget();\n\tthis.doubleBuffer[ 1 ] = this.generateRenderTarget();\n\n\tthis.inputTargetList = {};\n\n\tthis.uniforms = {\n\t\tresolution: {\n\t\t\ttype: 'v2',\n\t\t\tvalue: new THREE.Vector2( this.bufferSize, this.bufferSize )\n\t\t},\n\t\tmirrorBuffer: {\n\t\t\ttype: 't',\n\t\t\tvalue: this.doubleBuffer[ 1 ]\n\t\t}\n\t};\n\n\tthis.shader = new THREE.ShaderMaterial( {\n\n\t\tuniforms: this.uniforms,\n\t\tvertexShader: this.vertexShader,\n\t\tfragmentShader: this.fragmentSahader\n\n\t} );\n\n}\n\nFBOPass.prototype = {\n\n\tgetShader: function () {\n\t\treturn this.shader;\n\t},\n\tgetRenderTarget: function () {\n\t\treturn this.doubleBuffer[ this.currentBuffer ];\n\t},\n\tsetInputTarget: function ( shaderInputName, inputTarget ) {\n\t\tthis.uniforms[ shaderInputName ] = {\n\t\t\ttype: 't',\n\t\t\tvalue: inputTarget\n\t\t};\n\t},\n\tswapBuffer: function () {\n\n\t\tthis.uniforms.mirrorBuffer.value = this.doubleBuffer[ this.currentBuffer ];\n\t\tthis.currentBuffer ^= 1; // toggle between 0 and 1\n\n\t},\n\tgenerateRenderTarget: function () {\n\n\t\tvar target = new THREE.WebGLRenderTarget( this.bufferSize, this.bufferSize, {\n\n\t\t\twrapS: THREE.ClampToEdgeWrapping,\n\t\t\twrapT: THREE.ClampToEdgeWrapping,\n\t\t\tminFilter: THREE.NearestFilter,\n\t\t\tmagFilter: THREE.NearestFilter,\n\t\t\tformat: THREE.RGBAFormat,\n\t\t\ttype: THREE.FloatType,\n\t\t\tstencilBuffer: false,\n\t\t\tdepthBuffer: false\n\n\t\t} );\n\n\t\treturn target;\n\n\t},\n\tattachUniform: function ( uniformsInput ) {\n\n\t\tvar self = this;\n\t\tObject.keys( uniformsInput ).forEach( function ( key ) {\n\n\t\t\tself.uniforms[ key ] = uniformsInput[ key ];\n\n\t\t} );\n\n\t}\n\n};\n","\nfunction HUD( renderer ) {\n\n\tthis.renderer = renderer;\n\tthis.HUDMargin = 0.05;\n\tvar hudHeight = 2.0 / 4.0; // 2.0 = full screen size\n\tvar hudWidth = hudHeight;\n\n\tthis.HUDCam = new THREE.OrthographicCamera( -SCREEN_RATIO, SCREEN_RATIO, 1, -1, 1, 10 );\n\tthis.HUDCam.position.z = 5;\n\n\tthis.hudMaterial = new THREE.ShaderMaterial( {\n\n\t\tuniforms: {\n\t\t\ttDiffuse: {\n\t\t\t\ttype: \"t\",\n\t\t\t\tvalue: this.tTarget\n\t\t\t}\n\t\t},\n\t\tvertexShader: SHADERS.hudVert,\n\t\tfragmentShader: SHADERS.hudFrag,\n\t\tdepthWrite: false,\n\t\tdepthTest: false,\n\t\tside: THREE.DoubleSide\n\n\t} );\n\n\n\tthis.hudGeo = new THREE.PlaneBufferGeometry( hudWidth, hudHeight );\n\tthis.hudGeo.applyMatrix( new THREE.Matrix4().makeScale( 1, -1, 1 ) ); // flipY\n\tthis.hudGeo.applyMatrix( new THREE.Matrix4().makeTranslation( hudWidth / 2, hudHeight / 2, 0 ) );\n\n\tthis.HUDMesh = new THREE.Mesh( this.hudGeo, this.hudMaterial );\n\tthis.HUDMesh.position.x = this.HUDCam.left + this.HUDMargin;\n\tthis.HUDMesh.position.y = this.HUDCam.bottom + this.HUDMargin;\n\n\tthis.HUDScene = new THREE.Scene();\n\tthis.HUDScene.add( this.HUDMesh );\n\n}\n\n\n\nHUD.prototype = {\n\n\tsetInputTexture: function ( target ) {\n\n\t\tthis.hudMaterial.uniforms.tDiffuse.value = target;\n\n\t},\n\n\trender: function () {\n\n\t\tthis.renderer.clearDepth();\n\t\tthis.renderer.render( this.HUDScene, this.HUDCam );\n\n\t},\n\n\tupdate: function () { // call on window resize\n\n\t\t// match aspect ratio to prevent distortion\n\t\tthis.HUDCam.left = -SCREEN_RATIO;\n\t\tthis.HUDCam.right = SCREEN_RATIO;\n\n\t\tthis.HUDMesh.position.x = this.HUDCam.left + this.HUDMargin;\n\t\tthis.HUDMesh.position.y = this.HUDCam.bottom + this.HUDMargin;\n\n\t\tthis.HUDCam.updateProjectionMatrix();\n\n\t}\n\n};\n","function createGrid() {\n\n   var gridSize = 512;\n   var gridResolution = 64;\n\n   var halfGridSize = gridSize * 0.5;\n   var cellSize = gridSize / gridResolution;\n   var cellCenter = cellSize * 0.5;\n   var voxelSize = cellSize * 0.85;\n\n   var gridGeom = new THREE.BufferGeometry();\n\n   var final = [];\n   var normals = [];\n   var topQuad = [];\n   var centroid = [];\n   var here = [];\n\n   function computeVoxelVertices() {\n\n      var s = voxelSize * 0.5;\n      var vertices = [];\n\n      vertices.push( [  s, -s,  s ] );\n      vertices.push( [ -s, -s,  s ] );\n      vertices.push( [ -s, -s, -s ] );\n      vertices.push( [  s, -s, -s ] );\n\n      vertices.push( [  s,  s,  s ] );\n      vertices.push( [ -s,  s,  s ] );\n      vertices.push( [ -s,  s, -s ] );\n      vertices.push( [  s,  s, -s ] );\n\n      return vertices;\n\n   }\n\n   function constructVoxel() {\n\n      for ( var r = 0; r < gridResolution; r ++ ) {\n\n         for ( var c = 0; c < gridResolution; c ++ ) {\n\n            var rp = -halfGridSize + ( r + 1 ) * cellSize;\n            var cp = -halfGridSize + ( c + 1 ) * cellSize;\n\n            var vv = computeVoxelVertices();\n\n            // quad idx\n            [  3, 2, 1, 1, 0, 3, // -y\n               4, 5, 6, 6, 7, 4, // +y\n               0, 1, 5, 5, 4, 0, // +z\n               2, 3, 7, 7, 6, 2, // -z\n               3, 0, 4, 4, 7, 3, // +x\n               1, 2, 6, 6, 5, 1  // -x\n            ].forEach( ( qidx, idx ) => {\n               final.push( vv[ qidx ][ 0 ] + rp );\n               final.push( vv[ qidx ][ 1 ] );\n               final.push( vv[ qidx ][ 2 ] + cp );\n\n               // flag topQuad to displace in shader\n               if ( qidx === 4 || qidx === 5 || qidx === 6 || qidx === 7 ) topQuad.push( 1.0 );\n               else topQuad.push( -1.0 );\n\n               centroid.push( rp, cp );\n               here.push( ( r + 0.5 ) / gridResolution, ( c + 0.5 ) / gridResolution );\n\n            } );\n\n            // -y +y\n            normals.push( 0, -1, 0, 0, -1, 0, 0, -1, 0 );normals.push( 0, -1, 0, 0, -1, 0, 0, -1, 0 );\n            normals.push( 0,  1, 0, 0,  1, 0, 0,  1, 0 );normals.push( 0,  1, 0, 0,  1, 0, 0,  1, 0 );\n            // +z -z\n            normals.push( 0, 0,  1, 0, 0,  1, 0, 0,  1 );normals.push( 0, 0,  1, 0, 0,  1, 0, 0,  1 );\n            normals.push( 0, 0, -1, 0, 0, -1, 0, 0, -1 );normals.push( 0, 0, -1, 0, 0, -1, 0, 0, -1 );\n            // +x -x\n            normals.push(  1, 0, 0,  1, 0, 0,  1, 0, 0 );normals.push(  1, 0, 0,  1, 0, 0,  1, 0, 0 );\n            normals.push( -1, 0, 0, -1, 0, 0, -1, 0, 0 );normals.push( -1, 0, 0, -1, 0, 0, -1, 0, 0 );\n\n         }\n\n      }\n\n   }\n\n   constructVoxel();\n\n   var buffVerts = new Float32Array( final );\n   var buffNorms = new Float32Array( normals );\n   var buffTopQuad = new Float32Array( topQuad );\n   var buffCentroid = new Float32Array( centroid );\n   var buffHere = new Float32Array( here );\n   console.log( 'buffVerts:', buffVerts.length );\n   console.log( 'buffNorms:', buffNorms.length );\n\n\tgridGeom.addAttribute( 'position', new THREE.BufferAttribute( buffVerts, 3 ) );\n\tgridGeom.addAttribute( 'normal'  , new THREE.BufferAttribute( buffNorms, 3 ) );\n\tgridGeom.addAttribute( 'topQuad'  , new THREE.BufferAttribute( buffTopQuad, 1 ) );\n   gridGeom.addAttribute( 'centroid'  , new THREE.BufferAttribute( buffCentroid, 2 ) );\n   gridGeom.addAttribute( 'here'  , new THREE.BufferAttribute( buffHere, 2 ) );\n\n\tvar gridShader = new THREE.ShaderMaterial( {\n\n\t\tuniforms: {\n\t\t\ttMatcap: { type: 't', value: TEXTURES.matcap },\n         tNoise:  { type: 't', value: null },\n\t\t},\n\t\tattributes: { // need to specify custom attributes .addAttribute above won't do\n\t\t\ttopQuad: { type: 'f', value: null },\n         centroid: { type: 'v2', value: null },\n         here: { type: 'v2', value: null }\n\t\t},\n\t\tvertexShader: SHADERS.gridVert,\n\t\tfragmentShader: SHADERS.gridFrag,\n      side: THREE.BackSide,\n      // side: THREE.DoubleSide,\n      // transparent: true,\n      // depthTest: false,\n      // depthWrite: false,\n      // blending: THREE.AdditiveBlending\n\n\t} );\n\n   // var gridMesh = new THREE.PointCloud( gridGeom, new THREE.PointCloudMaterial( { size: 1 } ) );\n   // var gridMesh = new THREE.Mesh( gridGeom, new THREE.MeshBasicMaterial() );\n   // var gridMesh = new THREE.Mesh( gridGeom, new THREE.MeshBasicMaterial({ wireframe: true }) );\n   var gridMesh = new THREE.Mesh( gridGeom, gridShader );\n\n\treturn gridMesh;\n\n}\n","'use strict';\n\nfunction main() {\n\n   initGui();\n\n   window.uniformsInput = {\n\t\ttime: { type: 'f', value: 0.0 }\n\t};\n\n   var fboSize = 512;\n\twindow.FBOC = new FBOCompositor( RENDERER, fboSize, SHADERS.passVert );\n\tFBOC.addPass( 'noisePass', SHADERS.noiseFrag, null );\n   FBOC.getPass( 'noisePass' ).attachUniform( uniformsInput );\n\n   window.grid = createGrid();\n   SCENE.add( grid );\n\n   window.hud = new HUD( RENDERER );\n\n   // // test mapcap shader\n   // var sph = new THREE.SphereGeometry( 250, 64, 64 );\n   // var sphShader = new THREE.ShaderMaterial( {\n   //\n\t// \tuniforms: {\n\t// \t\ttMatcap: { type: 't', value: TEXTURES.matcap },\n\t// \t},\n\t// \tvertexShader: SHADERS.matcapVert,\n\t// \tfragmentShader: SHADERS.matcapFrag\n   //\n\t// } );\n   // window.sphMesh = new THREE.Mesh( sph, sphShader );\n   // SCENE.add( sphMesh );\n\n}\n","'use strict';\n\nfunction update() {\n\n\tuniformsInput.time.value = CLOCK.getElapsedTime();\n\n\tFBOC.step();\n\tgrid.material.uniforms.tNoise.value = FBOC.getPass( 'noisePass' ).getRenderTarget();\n\n\tupdateGuiDisplay();\n\n}\n\n\n// ----  draw loop\nfunction run() {\n\n\trequestAnimationFrame( run );\n\tRENDERER.clear();\n\tupdate();\n\tRENDERER.render( SCENE, CAMERA );\n\n\thud.setInputTexture( FBOC.getPass( 'noisePass' ).getRenderTarget() );\n\thud.render();\n\n\tSTATS.update();\n\n};\n","'use strict';\n\nwindow.addEventListener( 'keypress', event => {\n\n\tswitch( event.keyCode ) {\n\n\t\tcase 65:/*A*/\n\t\tcase 97:/*a*/ SCENE_SETTINGS.enableGridHelper ^= 1; updateHelpers();\n\t\tbreak;\n\n\t\tcase 83 :/*S*/\n\t\tcase 115:/*s*/ SCENE_SETTINGS.enableAxisHelper ^= 1; updateHelpers();\n\t\tbreak;\n\n\t}\n\n} );\n\nwindow.addEventListener( 'resize', debounce( onWindowResize, 50 ) );\n\nfunction onWindowResize() {\n\n\tWIDTH = window.innerWidth;\n\tHEIGHT = window.innerHeight;\n\n\tPIXEL_RATIO = window.devicePixelRatio || 1;\n\tSCREEN_RATIO = WIDTH/HEIGHT;\n\n\tCAMERA.aspect = SCREEN_RATIO;\n\tCAMERA.updateProjectionMatrix();\n\n\tRENDERER.setSize( WIDTH, HEIGHT );\n\tRENDERER.setPixelRatio( PIXEL_RATIO );\n\n\thud.update();\n\n}\n","'use strict';\n\nfunction debounce(func, wait, immediate) {\n\n\tvar timeout;\n\treturn () => {\n\n\t\tvar context = this, args = arguments;\n\t\tvar later = () => {\n\n\t\t\ttimeout = null;\n\t\t\tif (!immediate) func.apply(context, args);\n\n\t\t};\n\t\tvar callNow = immediate && !timeout;\n\t\tclearTimeout(timeout);\n\t\ttimeout = setTimeout(later, wait);\n\t\tif (callNow) func.apply(context, args);\n\n\t};\n\n}\n"],"sourceRoot":"/source/"}